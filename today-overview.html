<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>Today's WX Report</title>
  </head>
  <body>
    <a href="index.html">Return Home</a>
    <h3>Today's WX Report</h3>
    <div id="today"></div>
    <div id="today2"></div>
    <div id="tomorrow"></div>
    <div id="tomorrow2"></div>
    <div id="threeDay"></div>
    <div id="threeDay2"></div>
    <br>
    <h3>Current Conditions</h3>
    <div id="bend"></div>
    <div id="sisters"></div>
    <div id="redmond"></div>
    <div id="prineville"></div>
    <div id="madras"></div>
    <div id="warm-springs"></div>
    <div id="la-pine"></div>
    <div id="sunriver"></div>
    <script>
      function bendWeather(WX){
        var bendTempCelsius = WX.features[0].properties.temperature.value
        var bendTempFahrenheit = parseFloat(bendTempCelsius) * 1.8;
        bendTempFahrenheit = bendTempFahrenheit + 32
        document.getElementById("bend").innerHTML = "<strong>Bend: </strong>"+ bendTempFahrenheit
      }
      function sistersWeather(WX){
        var sistersTempCelsius = WX.features[0].properties.temperature.value
        var sistersTempFahrenheit = parseFloat(sistersTempCelsius) * 1.8;
        sistersTempFahrenheit = sistersTempFahrenheit + 32
        document.getElementById("sisters").innerHTML = "<strong>Sisters: </strong>"+ sistersTempFahrenheit
      }
      function displayData(data){
        console.log(data.properties.periods[0].detailedForecast)
        document.getElementById("today").innerHTML = "<strong>"+data.properties.periods[0].name +"</strong>: "+ data.properties.periods[0].detailedForecast
        document.getElementById("today2").innerHTML = "<strong>"+data.properties.periods[1].name +"</strong>: "+ data.properties.periods[1].detailedForecast
        document.getElementById("tomorrow").innerHTML = "<strong>"+data.properties.periods[2].name +"</strong>: "+ data.properties.periods[2].detailedForecast
        document.getElementById("tomorrow2").innerHTML = "<strong>"+data.properties.periods[3].name +"</strong>: "+ data.properties.periods[3].detailedForecast
        document.getElementById("threeDay").innerHTML = "<strong>"+data.properties.periods[4].name +"</strong>: "+ data.properties.periods[4].detailedForecast
        document.getElementById("threeDay2").innerHTML = "<strong>"+data.properties.periods[5].name +"</strong>: "+ data.properties.periods[5].detailedForecast
      }
      function getData(){
        fetch("https://api.weather.gov/gridpoints/PDT/37,41/forecast?units=us")
        .then(function(resp) {return resp.json()})
        .then (function(data) {
            displayData(data);
        })
        .catch(function(){
          
        });
        fetch("https://api.weather.gov/stations/KBDN/observations")
        .then(function(resp) {return resp.json()})
        .then (function(data) {
          bendWeather(data)
        })
        fetch("https://api.weather.gov/stations/K6K5/observations")
        .then(function(resp) {return resp.json()})
        .then (function(data) {
          sistersWeather(data)
        })
      }
      window.onload = function(){
        getData();
      }
    </script>
  </body>
</html>
